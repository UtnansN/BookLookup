CREATE DATABASE IF NOT EXISTS book_lookup;
USE book_lookup;

CREATE USER IF NOT EXISTS 'bookadmin'@'localhost' IDENTIFIED BY 'pass';
GRANT ALL PRIVILEGES ON *.* TO 'bookadmin'@'localhost';

CREATE TABLE IF NOT EXISTS publisher
(
    id   INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
    name VARCHAR(512)
);

CREATE TABLE IF NOT EXISTS book
(
    id           INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
    title        VARCHAR(512),
    year         INT,
    fk_publisher INT,
    FOREIGN KEY (fk_publisher) REFERENCES publisher (id)
);

CREATE TABLE IF NOT EXISTS author
(
    id   INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
    name VARCHAR(512)        NOT NULL
);

CREATE TABLE IF NOT EXISTS author_books
(
    fk_author INT,
    fk_book   INT,
    FOREIGN KEY (fk_author) REFERENCES author (id),
    FOREIGN KEY (fk_book) REFERENCES book (id)
);


# Inserts below are automatically generated by IDEA. They were put in the DB using this application.
insert into book_lookup.author (id, name) values (1, 'George Orwell');
insert into book_lookup.author (id, name) values (2, 'J. K. Rowling');
insert into book_lookup.author (id, name) values (3, 'Yuval Noah Harari');
insert into book_lookup.author (id, name) values (4, 'Benjamin Graham');
insert into book_lookup.author (id, name) values (5, 'Jason Zweig');
insert into book_lookup.author (id, name) values (6, 'Warren Buffett');
insert into book_lookup.author (id, name) values (7, 'Walter Isaacson');
insert into book_lookup.author (id, name) values (8, 'Laura Hillenbrand');
insert into book_lookup.author (id, name) values (9, 'Peter Thiel');
insert into book_lookup.author (id, name) values (10, 'Blake Masters');
insert into book_lookup.author (id, name) values (11, 'J.R.R. Tolkien');
insert into book_lookup.author (id, name) values (12, 'Kevin Kelly');
insert into book_lookup.author (id, name) values (13, 'Andy Hunt');
insert into book_lookup.author (id, name) values (14, 'Dave Thomas');
insert into book_lookup.author (id, name) values (15, 'George R.R. Martin');
insert into book_lookup.author (id, name) values (16, 'Daniel J. Levitin');
insert into book_lookup.author (id, name) values (17, 'A.A. Milne');
insert into book_lookup.author (id, name) values (18, 'Daniel Kahneman');
insert into book_lookup.author (id, name) values (19, 'Francis Scott Fitzgerald');
insert into book_lookup.author (id, name) values (20, 'Stephenie Meyer');
insert into book_lookup.author (id, name) values (21, 'Jonathan Clayden');
insert into book_lookup.author (id, name) values (22, 'Nick Greeves');
insert into book_lookup.author (id, name) values (23, 'Stuart Warren');
insert into book_lookup.author (id, name) values (24, 'Peter Wothers');
insert into book_lookup.author (id, name) values (25, 'Warren Sande');
insert into book_lookup.author (id, name) values (26, 'Carter Sande');
insert into book_lookup.author (id, name) values (27, 'Jude Fisher');

insert into book_lookup.publisher (id, name) values (1, 'Secker & Warburg');
insert into book_lookup.publisher (id, name) values (3, 'Raincoast');
insert into book_lookup.publisher (id, name) values (4, 'Harvill Secker');
insert into book_lookup.publisher (id, name) values (5, 'Harper Business');
insert into book_lookup.publisher (id, name) values (6, 'Simon & Schuster');
insert into book_lookup.publisher (id, name) values (7, 'Random House');
insert into book_lookup.publisher (id, name) values (8, 'Crown Business');
insert into book_lookup.publisher (id, name) values (9, 'Houghton Mifflin');
insert into book_lookup.publisher (id, name) values (10, 'Viking');
insert into book_lookup.publisher (id, name) values (11, 'Addison-Wesley Professional');
insert into book_lookup.publisher (id, name) values (12, 'Bantam');
insert into book_lookup.publisher (id, name) values (13, 'Dutton Adult');
insert into book_lookup.publisher (id, name) values (14, 'Methuen & Co. Ltd.');
insert into book_lookup.publisher (id, name) values (15, 'Harper');
insert into book_lookup.publisher (id, name) values (16, 'Farrar, Straus and Giroux');
insert into book_lookup.publisher (id, name) values (17, 'Charles Scribner''s Sons');
insert into book_lookup.publisher (id, name) values (18, 'Little, Brown and Company');
insert into book_lookup.publisher (id, name) values (19, 'Oxford University Press');
insert into book_lookup.publisher (id, name) values (20, 'Manning Publications');
insert into book_lookup.publisher (id, name) values (21, 'Houghton Mifflin Harcourt');

insert into book_lookup.book (id, title, year, fk_publisher) values (1, 1984, 1949, 1);
insert into book_lookup.book (id, title, year, fk_publisher) values (3, 'Harry Potter and the Philosopher''s Stone', 1998, 3);
insert into book_lookup.book (id, title, year, fk_publisher) values (4, 'Sapiens: A Brief History of Humankind', 2014, 4);
insert into book_lookup.book (id, title, year, fk_publisher) values (5, 'Harry Potter and the Order of the Phoenix', 2003, 3);
insert into book_lookup.book (id, title, year, fk_publisher) values (6, 'Harry Potter and the Deathly Hallows', 2007, 3);
insert into book_lookup.book (id, title, year, fk_publisher) values (7, 'The Intelligent Investor', 2006, 5);
insert into book_lookup.book (id, title, year, fk_publisher) values (8, 'Steve Jobs', 2011, 6);
insert into book_lookup.book (id, title, year, fk_publisher) values (9, 'Unbroken: A World War II Story of Survival, Resilience and Redemption', 2010, 7);
insert into book_lookup.book (id, title, year, fk_publisher) values (10, 'Zero to One: Notes on Startups, or How to Build the Future', 2014, 8);
insert into book_lookup.book (id, title, year, fk_publisher) values (11, 'The Hobbit, Part One', 1937, 9);
insert into book_lookup.book (id, title, year, fk_publisher) values (12, 'The Inevitable: Understanding the 12 Technological Forces That Will Shape Our Future', 2016, 10);
insert into book_lookup.book (id, title, year, fk_publisher) values (13, 'The Pragmatic Programmer: From Journeyman to Master', 1999, 11);
insert into book_lookup.book (id, title, year, fk_publisher) values (14, 'A Game of Thrones', 2005, 12);
insert into book_lookup.book (id, title, year, fk_publisher) values (15, 'This Is Your Brain on Music: The Science of a Human Obsession', 2006, 13);
insert into book_lookup.book (id, title, year, fk_publisher) values (16, 'Winnie-the-pooh', 1926, 14);
insert into book_lookup.book (id, title, year, fk_publisher) values (17, 'Homo Deus: A History of Tomorrow', 2017, 15);
insert into book_lookup.book (id, title, year, fk_publisher) values (18, 'Animal Farm', 1946, 1);
insert into book_lookup.book (id, title, year, fk_publisher) values (19, 'Thinking, Fast and Slow', 2011, 16);
insert into book_lookup.book (id, title, year, fk_publisher) values (20, 'The Great Gatsby', 1925, 17);
insert into book_lookup.book (id, title, year, fk_publisher) values (21, 'Twilight', 2005, 18);
insert into book_lookup.book (id, title, year, fk_publisher) values (22, 'Organic Chemistry', 2000, 19);
insert into book_lookup.book (id, title, year, fk_publisher) values (23, 'Hello World! Computer Programming for Kids and Other Beginners', 2008, 20);
insert into book_lookup.book (id, title, year, fk_publisher) values (24, 'The Lord of the Rings: The Fellowship of the Ring', 2001, 21);

insert into book_lookup.author_books (fk_author, fk_book) values (2, 3);
insert into book_lookup.author_books (fk_author, fk_book) values (2, 5);
insert into book_lookup.author_books (fk_author, fk_book) values (2, 6);
insert into book_lookup.author_books (fk_author, fk_book) values (4, 7);
insert into book_lookup.author_books (fk_author, fk_book) values (5, 7);
insert into book_lookup.author_books (fk_author, fk_book) values (6, 7);
insert into book_lookup.author_books (fk_author, fk_book) values (7, 8);
insert into book_lookup.author_books (fk_author, fk_book) values (8, 9);
insert into book_lookup.author_books (fk_author, fk_book) values (9, 10);
insert into book_lookup.author_books (fk_author, fk_book) values (10, 10);
insert into book_lookup.author_books (fk_author, fk_book) values (12, 12);
insert into book_lookup.author_books (fk_author, fk_book) values (13, 13);
insert into book_lookup.author_books (fk_author, fk_book) values (14, 13);
insert into book_lookup.author_books (fk_author, fk_book) values (15, 14);
insert into book_lookup.author_books (fk_author, fk_book) values (16, 15);
insert into book_lookup.author_books (fk_author, fk_book) values (17, 16);
insert into book_lookup.author_books (fk_author, fk_book) values (3, 4);
insert into book_lookup.author_books (fk_author, fk_book) values (3, 17);
insert into book_lookup.author_books (fk_author, fk_book) values (1, 1);
insert into book_lookup.author_books (fk_author, fk_book) values (1, 18);
insert into book_lookup.author_books (fk_author, fk_book) values (18, 19);
insert into book_lookup.author_books (fk_author, fk_book) values (19, 20);
insert into book_lookup.author_books (fk_author, fk_book) values (20, 21);
insert into book_lookup.author_books (fk_author, fk_book) values (21, 22);
insert into book_lookup.author_books (fk_author, fk_book) values (22, 22);
insert into book_lookup.author_books (fk_author, fk_book) values (23, 22);
insert into book_lookup.author_books (fk_author, fk_book) values (24, 22);
insert into book_lookup.author_books (fk_author, fk_book) values (25, 23);
insert into book_lookup.author_books (fk_author, fk_book) values (26, 23);
insert into book_lookup.author_books (fk_author, fk_book) values (11, 11);
insert into book_lookup.author_books (fk_author, fk_book) values (11, 24);
insert into book_lookup.author_books (fk_author, fk_book) values (27, 24);